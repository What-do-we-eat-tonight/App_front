import{u as t,x as e,o as n,d as o,w as s,c as a,y as i,F as l,i as u,r as c,a as r,b as m,t as d}from"./index.8f27103f.js";import{_ as f}from"./u-cell-item.11f12ec4.js";import{_,r as h}from"./uni-app.es.117eeecc.js";import{_ as p}from"./u-button.b4b9cb03.js";import{_ as g,a as b}from"./u-row.74c7cb75.js";import{_ as w}from"./u-modal.2fb8b156.js";import{_ as j,a as x}from"./uni-collapse.61d70091.js";import"./u-icon.aeca22ef.js";import"./uni-icons.414bc032.js";var y=_({data:()=>({show:!1,content:"您是否确认删除公告？",idx:"",c:{cno:"",sno:""},announcement_list:[],title:[{}],t:{ano:""}}),methods:{async test(){this.c.cno=t("cno"),console.log(this.c),this.announcement_list=await this.$u.post("/student_user/announcement-list",this.c)},get_title(t){var e=t.split("",10);return e[0]=e[0]+e[1]+e[2]+e[3]+e[4]+e[5]+e[6]+e[7]+e[8]+e[9],e[0]},open(t){this.show=!0,this.idx=t},async delete_announcement(){this.t.ano=this.announcement_list[this.idx].ano,console.log(this.t),await this.$u.post("/teacher_user/delete-announcement",this.t),this.$u.toast("删除成功!"),this.$u.route({url:"pages/teacher_announcement/teacher_announcement",type:"to"})}},onNavigationBarButtonTap(){this.$u.route({url:"/pages/add_announcement/add_announcement"})},onShow(){this.test()},onPullDownRefresh(){console.log("refresh"),this.test(),setTimeout((function(){e()}),1e3)},onBackPress(t){console.log(t),"backbutton"==t.from&&(console.log("??????"),setTimeout((()=>{this.$u.route("/pages/teacher_class/teacher_class")}),500))}},[["render",function(t,e,_,y,$,k){const v=u,C=h(c("u-cell-item"),f),B=h(c("u-button"),p),T=h(c("u-col"),g),V=h(c("u-modal"),w),N=h(c("u-row"),b),P=h(c("uni-collapse-item"),j),S=h(c("uni-collapse"),x);return n(),o(v,{class:"index"},{default:s((()=>[(n(!0),a(l,null,i($.announcement_list,((t,a)=>(n(),o(v,{key:a},{default:s((()=>[r(S,{accordion:!0},{default:s((()=>[r(P,{align:"left",title:k.get_title(t.content).toString()},{default:s((()=>[r(C,{arrow:!1},{default:s((()=>[r(v,{align:"left"},{default:s((()=>[m(d(t.content),1)])),_:2},1024),m(d(t.submit_time),1)])),_:2},1024),r(N,{gutter:"16"},{default:s((()=>[r(T,{span:"8"},{default:s((()=>[r(B,{type:"info",class:"content"},{default:s((()=>[m("已确定收到的人数为："+d(t.confirmNum),1)])),_:2},1024)])),_:2},1024),r(T,{span:"4"},{default:s((()=>[r(V,{modelValue:$.show,"onUpdate:modelValue":e[0]||(e[0]=t=>$.show=t),content:$.content,"show-cancel-button":!0,onConfirm:k.delete_announcement},null,8,["modelValue","content","onConfirm"]),r(B,{type:"error",onClick:t=>k.open(a)},{default:s((()=>[m("删除公告")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["title"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})}],["__scopeId","data-v-88af5590"]]);export{y as default};
