import{r as e,o as t,d as l,w as i,a as n,k as o,n as a,e as s,f as r,b as u,t as c,i as d,p as h,v as f,I as m,u as p,J as g,K as y,L as b,M as C}from"./index.8f27103f.js";import{_ as x}from"./u-button.b4b9cb03.js";import{_ as S,r as k}from"./uni-app.es.117eeecc.js";import{_ as v}from"./u-icon.aeca22ef.js";var T=S({name:"u-field",emits:["update:modelValue","input","focus","blur","confirm","right-icon-click","click"],props:{value:[Number,String],modelValue:[Number,String],icon:String,rightIcon:String,arrowDirection:{type:String,default:"right"},required:Boolean,label:String,password:Boolean,clearable:{type:Boolean,default:!0},labelWidth:{type:[Number,String],default:130},labelAlign:{type:String,default:"left"},inputAlign:{type:String,default:"left"},iconColor:{type:String,default:"#606266"},autoHeight:{type:Boolean,default:!0},errorMessage:{type:[String,Boolean],default:""},placeholder:String,placeholderStyle:String,focus:Boolean,fixed:Boolean,type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},labelPosition:{type:String,default:"left"},fieldStyle:{type:Object,default:()=>({})},clearSize:{type:[Number,String],default:30},iconStyle:{type:Object,default:()=>({})},borderTop:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!0},trim:{type:Boolean,default:!0}},data:()=>({focused:!1,itemIndex:0}),computed:{valueCom(){return this.modelValue},inputWrapStyle(){let e={};return e.textAlign=this.inputAlign,"left"==this.labelPosition?e.margin="0 8rpx":e.marginRight="8rpx",e},rightIconStyle(){let e={},t={top:"-90deg",bottom:"90deg",left:"180deg",right:"0deg"}[this.arrowDirection]||"0deg";return e.transform="rotate("+t+")",e},labelStyle(){let e={};return"left"==this.labelAlign&&(e.justifyContent="flext-start"),"center"==this.labelAlign&&(e.justifyContent="center"),"right"==this.labelAlign&&(e.justifyContent="flext-end"),e},justifyContent(){return"left"==this.labelAlign?"flex-start":"center"==this.labelAlign?"center":"right"==this.labelAlign?"flex-end":void 0},inputMaxlength(){return Number(this.maxlength)},fieldInnerStyle(){let e={};return"left"==this.labelPosition?e.flexDirection="row":e.flexDirection="column",e}},methods:{onInput(e){let t=e.detail.value;this.trim&&(t=this.$u.trim(t)),this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(e){this.focused=!0,this.$emit("focus",e)},onBlur(e){setTimeout((()=>{this.focused=!1}),100),this.$emit("blur",e)},onConfirm(e){this.$emit("confirm",e.detail.value)},onClear(e){this.$emit("input",""),this.$emit("update:modelValue","")},rightIconClick(){this.$emit("right-icon-click"),this.$emit("click")},fieldClick(){this.$emit("click")}}},[["render",function(p,g,y,b,C,x){const S=k(e("u-icon"),v),T=d,$=h,_=f,I=m;return t(),l(T,{class:o(["u-field",{"u-border-top":y.borderTop,"u-border-bottom":y.borderBottom}])},{default:i((()=>[n(T,{class:o(["u-field-inner",["textarea"==y.type?"u-textarea-inner":"","u-label-postion-"+y.labelPosition]])},{default:i((()=>[n(T,{class:o(["u-label",[y.required?"u-required":""]]),style:a({justifyContent:x.justifyContent,flex:"left"==y.labelPosition?`0 0 ${y.labelWidth}rpx`:"1"})},{default:i((()=>[y.icon?(t(),l(T,{key:0,class:"u-icon-wrap"},{default:i((()=>[n(S,{size:"32","custom-style":y.iconStyle,name:y.icon,color:y.iconColor,class:"u-icon"},null,8,["custom-style","name","color"])])),_:1})):s("",!0),r(p.$slots,"icon",{},void 0,!0),n($,{class:o(["u-label-text",[p.$slots.icon||y.icon?"u-label-left-gap":""]])},{default:i((()=>[u(c(y.label),1)])),_:1},8,["class"])])),_:3},8,["class","style"]),n(T,{class:"fild-body"},{default:i((()=>[n(T,{class:"u-flex-1 u-flex",style:a([x.inputWrapStyle])},{default:i((()=>["textarea"==y.type?(t(),l(_,{key:0,class:"u-flex-1 u-textarea-class",style:a([y.fieldStyle]),value:x.valueCom,placeholder:y.placeholder,placeholderStyle:y.placeholderStyle,disabled:y.disabled,maxlength:x.inputMaxlength,focus:y.focus,autoHeight:y.autoHeight,fixed:y.fixed,onInput:x.onInput,onBlur:x.onBlur,onFocus:x.onFocus,onConfirm:x.onConfirm,onClick:x.fieldClick},null,8,["style","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","fixed","onInput","onBlur","onFocus","onConfirm","onClick"])):(t(),l(I,{key:1,style:a([y.fieldStyle]),type:y.type,class:"u-flex-1 u-field__input-wrap",value:x.valueCom,password:y.password||"password"===y.type,placeholder:y.placeholder,placeholderStyle:y.placeholderStyle,disabled:y.disabled,maxlength:x.inputMaxlength,focus:y.focus,confirmType:y.confirmType,onFocus:x.onFocus,onBlur:x.onBlur,onInput:x.onInput,onConfirm:x.onConfirm,onClick:x.fieldClick},null,8,["style","type","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","onFocus","onBlur","onInput","onConfirm","onClick"]))])),_:1},8,["style"]),y.clearable&&""!=x.valueCom&&C.focused?(t(),l(S,{key:0,size:y.clearSize,name:"close-circle-fill",color:"#c0c4cc",class:"u-clear-icon",onClick:x.onClear},null,8,["size","onClick"])):s("",!0),n(T,{class:"u-button-wrap"},{default:i((()=>[r(p.$slots,"right",{},void 0,!0)])),_:3}),y.rightIcon?(t(),l(S,{key:1,onClick:x.rightIconClick,name:y.rightIcon,color:"#c0c4cc",style:a([x.rightIconStyle]),size:"26",class:"u-arror-right"},null,8,["onClick","name","style"])):s("",!0)])),_:3})])),_:3},8,["class"]),!1!==y.errorMessage&&""!=y.errorMessage?(t(),l(T,{key:0,class:"u-error-message",style:a({paddingLeft:y.labelWidth+"rpx"})},{default:i((()=>[u(c(y.errorMessage),1)])),_:1},8,["style"])):s("",!0)])),_:3},8,["class"])}],["__scopeId","data-v-4e155436"]]);var $=S({name:"u-verification-code",emits:["start","end","change"],props:{seconds:{type:[String,Number],default:60},startText:{type:String,default:"获取验证码"},changeText:{type:String,default:"X秒重新获取"},endText:{type:String,default:"重新获取"},keepRunning:{type:Boolean,default:!1},uniqueKey:{type:String,default:""}},data(){return{secNum:this.seconds,timer:null,canGetCode:!0}},mounted(){this.checkKeepRunning()},watch:{seconds:{immediate:!0,handler(e){this.secNum=e}}},methods:{checkKeepRunning(){let e=Number(p(this.uniqueKey+"_$uCountDownTimestamp"));if(!e)return this.changeEvent(this.startText);let t=Math.floor(+new Date/1e3);this.keepRunning&&e&&e>t?(this.secNum=e-t,g(this.uniqueKey+"_$uCountDownTimestamp"),this.start()):this.changeEvent(this.startText)},start(){this.timer&&(clearInterval(this.timer),this.timer=null),this.$emit("start"),this.canGetCode=!1,this.changeEvent(this.changeText.replace(/x|X/,this.secNum)),this.setTimeToStorage(),this.timer=setInterval((()=>{--this.secNum?this.changeEvent(this.changeText.replace(/x|X/,this.secNum)):(clearInterval(this.timer),this.timer=null,this.changeEvent(this.endText),this.secNum=this.seconds,this.$emit("end"),this.canGetCode=!0)}),1e3)},reset(){this.canGetCode=!0,clearInterval(this.timer),this.secNum=this.seconds,this.changeEvent(this.endText)},changeEvent(e){this.$emit("change",e)},setTimeToStorage(){if(this.keepRunning&&this.timer&&this.secNum>0&&this.secNum<=this.seconds){let e=Math.floor(+new Date/1e3);y({key:this.uniqueKey+"_$uCountDownTimestamp",data:e+Number(this.secNum)})}}},beforeUnmount(){this.setTimeToStorage(),clearTimeout(this.timer),this.timer=null}},[["render",function(e,i,n,o,a,s){const r=d;return t(),l(r,{class:"u-code-wrap"})}],["__scopeId","data-v-6ed9493a"]]);var _=S({data:()=>({mobile:"",code:"",codeText:""}),methods:{codeChange(e){this.codeText=e},getCode(){this.$refs.uCode.canGetCode?(b({title:"正在获取验证码"}),setTimeout((()=>{C(),this.$refs.uCode.start()}),1e3)):this.$u.toast("倒计时结束后再发送")}}},[["render",function(o,a,s,r,h,f){const m=k(e("u-button"),x),p=k(e("u-field"),T),g=k(e("u-verification-code"),$),y=d;return t(),l(y,{class:""},{default:i((()=>[n(p,{modelValue:h.code,"onUpdate:modelValue":a[0]||(a[0]=e=>h.code=e),label:"验证码",placeholder:"请填写验证码"},{default:i((()=>[n(m,{size:"mini",slot:"right",type:"success",onClick:f.getCode},{default:i((()=>[u(c(h.codeText),1)])),_:1},8,["onClick"])])),_:1},8,["modelValue"]),n(g,{ref:"uCode",onChange:f.codeChange},null,8,["onChange"])])),_:1})}]]);export{_ as default};
